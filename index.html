<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Pacaj w Guzik</title>
    <script src="https://nodes.sequence.app/umd/sequence.js"></script>
    
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 50px; background-color: #121212; color: #e0e0e0; }
        #game-container { border: 3px solid #007bff; padding: 30px; display: inline-block; border-radius: 20px; background-color: #1e1e1e; }
        button { padding: 15px 30px; font-size: 20px; font-weight: bold; cursor: pointer; border-radius: 50px; border: none; }
        .auth-btn { background-color: #007bff; color: white; }
        .play-btn { background-color: #28a745; color: white; }
        #score { font-size: 32px; margin: 25px 0; color: #ffc107; }
    </style>
</head>
<body>

    <div id="game-container">
        <h1>Pacaj w Guzik</h1>
        
        <div id="auth-section">
            <p>Zaloguj siƒô, aby zaczƒÖƒá zabawƒô:</p>
            <button class="auth-btn" onclick="connectSequence()">Zaloguj przez Sequence</button>
        </div>

        <div id="play-section" style="display:none;">
            <p id="user-wallet" style="font-size: 12px; color: #888;"></p>
            <div id="score">Punkty: 0</div>
            <button class="play-btn" onclick="addPoint()">Pacaj jak szalony Jemiole!</button>
        </div>
    </div>

    <script>
        // --- TUTAJ WKLEJ SWOJE KLUCZE Z BUILDERA ---
        const projectAccessKey = 'AQAAAAAAALh5IxSkQVSt1pHvWybD9OlDl44';
        const waasConfigKey = 'eyJwcm9qZWN0SWQiOjQ3MjI1LCJycGNTZXJ2ZXIiOiJodHRwczovL3dhYXMuc2VxdWVuY2UuYXBwIn0=';
        // ------------------------------------------

        let points = 0;
        const sequence = window.sequence;

        async function connectSequence() {
            try {
                // Inicjalizacja portfela
                const wallet = sequence.initWallet(projectAccessKey, {
                    network: 'soneium-minato' // Sieƒá o kt√≥rej rozmawiali≈õmy
                });

                // Wywo≈Çanie okna logowania
                const connectDetails = await wallet.connect({
                    app: 'Pacaj w Guzik',
                    authorize: true
                });

                if (connectDetails.connected) {
                    console.log('Zalogowano!', connectDetails);
                    document.getElementById('user-wallet').innerText = "Tw√≥j ID: " + connectDetails.session.accountAddress;
                    document.getElementById('auth-section').style.display = 'none';
                    document.getElementById('play-section').style.display = 'block';
                }
            } catch (error) {
                console.error('B≈ÇƒÖd logowania:', error);
                alert('Oj, co≈õ nie pyk≈Ço z logowaniem!');
            }
        }

        function addPoint() {
            points++;
            document.getElementById('score').innerText = `Punkty: ${points}`;
            if (points === 20) {
                document.getElementById('game-container').innerHTML = 
                    "<h1>Wygra≈Ça≈õ!</h1><h2>Jeste≈õ debe≈õciak Iwonko! üèÜ</h2>";
            }
        }
    </script>
</body>
</html>
