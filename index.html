<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baltic Sands - Soneium</title>
    <script src="https://unpkg.com/@0xsequence/connect@latest/dist/sequence-connect.umd.js"></script>
    <style>
        body { font-family: sans-serif; background-color: #0f172a; color: white; text-align: center; padding-top: 100px; margin: 0; }
        .card { max-width: 400px; margin: auto; background: #1e293b; padding: 40px; border-radius: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        h1 { font-size: 28px; margin-bottom: 10px; }
        button { background: #7c3aed; color: white; border: none; padding: 18px 30px; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 18px; width: 100%; transition: 0.2s; }
        button:hover { background: #8b5cf6; }
        button:disabled { background: #475569; cursor: not-allowed; }
        #status { margin-top: 20px; color: #94a3b8; font-size: 14px; }
        .hidden { display: none; }
        #amber { font-size: 100px; cursor: pointer; user-select: none; }
    </style>
</head>
<body>

<div class="card">
    <h1>Baltic Sands üåä</h1>
    <p style="color: #94a3b8; margin-bottom: 30px;">Mining on Soneium Minato</p>
    
    <button id="login-btn" disabled>≈ÅADOWANIE...</button>
    <p id="status">Czekam na bibliotekƒô...</p>

    <div id="game" class="hidden">
        <div id="amber">üíé</div>
        <h2>Bursztyn: <span id="count">0</span></h2>
        <p id="addr" style="color: #38bdf8; font-size: 12px;"></p>
    </div>
</div>

<script>
    // Klucze z Twojego Playground
    const P_KEY = "AQAAAAAAALh5IxSkQVSt1pHvWybD9OlDl44";
    const W_KEY = "eyJwcm9qZWN0SWQiOjQ3MjI1LCJycGNTZXJ2ZXIiOiJodHRwczovL3dhYXMuc2VxdWVuY2UuYXBwIn0=";

    let connector;

    async function init() {
        if (!window.sequenceConnect) {
            setTimeout(init, 500);
            return;
        }

        const { createConfig, SequenceConnect } = window.sequenceConnect;

        const config = createConfig('waas', {
            projectAccessKey: P_KEY,
            waasConfigKey: W_KEY,
            defaultChainId: 1946,
            appName: "Baltic Sands",
            email: true,
            renderInline: false, // KLUCZOWA ZMIANA: Wy≈ÇƒÖczamy inline, by uniknƒÖƒá pustego pola
            defaultTheme: "dark"
        });

        connector = new SequenceConnect(config);
        
        document.getElementById('login-btn').disabled = false;
        document.getElementById('login-btn').innerText = "ZALOGUJ SIƒò I GRAJ";
        document.getElementById('status').innerText = "Po≈ÇƒÖczenie gotowe ‚úÖ";
    }

    document.getElementById('login-btn').onclick = async () => {
        document.getElementById('status').innerText = "Otwieranie okna logowania...";
        try {
            // To otworzy bezpieczne okno pop-up
            const response = await connector.connect({ appName: "Baltic Sands" });
            
            if (response.connected) {
                document.getElementById('login-btn').classList.add('hidden');
                document.getElementById('status').classList.add('hidden');
                document.getElementById('game').classList.remove('hidden');
                document.getElementById('addr').innerText = response.session.accountAddress;
            }
        } catch (err) {
            console.error(err);
            alert("B≈ÇƒÖd: " + err.message + ". Sprawd≈∫ czy zablokowa≈Çe≈õ wyskakujƒÖce okienka!");
            document.getElementById('status').innerText = "B≈ÇƒÖd po≈ÇƒÖczenia. Od≈õwie≈º stronƒô.";
        }
    };

    // Mechanika gry
    let score = 0;
    document.getElementById('amber').onclick = () => {
        score++;
        document.getElementById('count').innerText = score;
    };

    window.onload = init;
</script>

</body>
</html>
