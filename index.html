<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Baltic Sands - Soneium Connect</title>
    <script src="https://unpkg.com/@0xsequence/connect@latest/dist/sequence-connect.umd.js"></script>
    <style>
        body { font-family: sans-serif; background-color: #0f172a; color: white; text-align: center; padding-top: 50px; }
        .card { background: #1e293b; padding: 40px; border-radius: 20px; display: inline-block; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        #login-btn { background: #7c3aed; color: white; border: none; padding: 15px 30px; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 18px; }
        #login-btn:disabled { background: #475569; cursor: not-allowed; }
        #status { margin-top: 20px; color: #94a3b8; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="card">
    <h1>Baltic Sands ğŸŒŠ</h1>
    <button id="login-btn" disabled>ÅADOWANIE...</button>
    <p id="status">Inicjowanie Sequence Connect...</p>

    <div id="game-section" class="hidden">
        <div style="font-size: 80px; cursor: pointer;">ğŸ’</div>
        <h2>Bursztyn: <span id="counter">0</span></h2>
        <p id="wallet-addr"></p>
    </div>
</div>

<script>
    const P_KEY = "AQAAAAAAALh5IxSkQVSt1pHvWybD9OlDl44";
    const W_KEY = "eyJwcm9qZWN0SWQiOjQ3MjI1LCJycGNTZXJ2ZXIiOiJodHRwczovL3dhYXMuc2VxdWVuY2UuYXBwIn0=";

    let connector;

    async function init() {
        if (!window.sequenceConnect) {
            setTimeout(init, 500);
            return;
        }

        const { createConfig, SequenceConnect } = window.sequenceConnect;

        const config = createConfig('waas', {
            projectAccessKey: P_KEY,
            waasConfigKey: W_KEY,
            defaultChainId: 1946,
            appName: "Baltic Sands",
            email: true,
            // WYÅÄ„CZAMY RENDER INLINE - to kluczowe
            renderInline: false, 
            defaultTheme: "dark"
        });

        connector = new SequenceConnect(config);
        
        const btn = document.getElementById('login-btn');
        btn.disabled = false;
        btn.innerText = "ZALOGUJ SIÄ˜ I GRAJ";
        document.getElementById('status').innerText = "System gotowy âœ…";
    }

    document.getElementById('login-btn').onclick = async () => {
        try {
            const data = await connector.connect({ appName: "Baltic Sands" });
            
            if (data.connected) {
                document.getElementById('login-btn').classList.add('hidden');
                document.getElementById('status').classList.add('hidden');
                document.getElementById('game-section').classList.remove('hidden');
                document.getElementById('wallet-addr').innerText = "Portfel: " + data.session.accountAddress;
            }
        } catch (err) {
            console.error(err);
            alert("BÅ‚Ä…d poÅ‚Ä…czenia: " + err.message);
        }
    };

    // Gra
    let count = 0;
    document.body.addEventListener('click', (e) => {
        if(e.target.innerText === 'ğŸ’') {
            count++;
            document.getElementById('counter').innerText = count;
        }
    });

    window.onload = init;
</script>

</body>
</html>
