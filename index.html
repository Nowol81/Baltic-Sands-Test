<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baltic Sands - Mining Game</title>
    <script src="https://nodes.sequence.app/umd/sequence.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background-color: #f0f4f8; color: #333; padding-top: 50px; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: inline-block; min-width: 300px; }
        #amber-stone { font-size: 80px; cursor: pointer; transition: transform 0.1s; user-select: none; }
        #amber-stone:active { transform: scale(0.9); }
        .hidden { display: none; }
        button { background-color: #6c5ce7; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 16px; margin-top: 10px; }
        button:hover { background-color: #a29bfe; }
        #status { margin-top: 15px; font-weight: bold; color: #666; }
    </style>
</head>
<body>

<div class="container">
    <h1>Baltic Sands </h1>
    <p>Wydobywaj bursztyn na sieci Soneium</p>

    <div id="login-section">
        <button id="login-btn">ZALOGUJ PRZEZ E-MAIL</button>
        <p id="status">Zaloguj si, aby zacz wydobycie</p>
    </div>

    <div id="game-section" class="hidden">
        <div id="amber-stone"></div>
        <h2>Tw贸j Bursztyn: <span id="counter">0</span></h2>
        <p>Klikaj w bursztyn, aby zbiera punkty!</p>
        <p><small>Adres portfela: <span id="wallet-addr">...</span></small></p>
    </div>
</div>

<script>
    // --- KONFIGURACJA Z TWOJEGO SEQUENCE BUILDERA ---
    // PAMITAJ: Wklej oba klucze dokadnie w te miejsca:
    const PROJECT_ACCESS_KEY = 'AQAAAAAAALh5IxSkQVSt1pHvWybD9OlDl44'; 
    const WAAS_CONFIG_KEY = 'AQAAAAAAALh5rxQ57EGIOirK4bNGjewaTUY';

    // Inicjalizacja Sequence zgodnie z dokumentacj Soneium Minato
    const sequence = new sequence.waas.SequenceWaaS({
        projectAccessKey: PROJECT_ACCESS_KEY,
        waasConfigKey: WAAS_CONFIG_KEY,
        network: 'soneium-minato' // Sie testowa Soneium
    });

    let count = 0;
    const loginBtn = document.getElementById('login-btn');
    const loginSection = document.getElementById('login-section');
    const gameSection = document.getElementById('game-section');
    const counterDisplay = document.getElementById('counter');
    const amberStone = document.getElementById('amber-stone');
    const walletAddrDisplay = document.getElementById('wallet-addr');
    const statusText = document.getElementById('status');

    // Obsuga logowania
    loginBtn.addEventListener('click', async () => {
        statusText.innerText = "Otwieram bezpieczne logowanie...";
        try {
            // Wywoanie portfela Embedded (WaaS)
            const wallet = await sequence.signIn({
                signInOptions: { appName: 'Baltic Sands Game' }
            });

            console.log('Zalogowano pomylnie:', wallet);
            const address = await wallet.getAddress();
            
            // Przeczanie widoku po zalogowaniu
            walletAddrDisplay.innerText = address.substring(0,6) + "..." + address.substring(38);
            loginSection.classList.add('hidden');
            gameSection.classList.remove('hidden');
        } catch (error) {
            console.error('Bd logowania:', error);
            statusText.innerText = "Bd: " + error.message;
            alert("Nie udao si zalogowa. Sprawd藕 ustawienia Allowed Origins w Builderze!");
        }
    });

    // Mechanika klikania
    amberStone.addEventListener('click', () => {
        count++;
        counterDisplay.innerText = count;
        
        // Co 10 klikni informujemy o postpie (miejsce na Tw贸j Smart Kontrakt)
        if (count % 10 === 0) {
            console.log("Osignito pr贸g 10 bursztyn贸w. System gotowy do mintowania ATT.");
        }
    });

</script>

</body>
</html>
